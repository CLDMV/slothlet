/**
 * @fileoverview CommonJS entry point for @cldmv/slothlet - imports ESM implementation.
 * @module @cldmv/slothlet
 */

/**
 * CommonJS entry that dynamically imports the ESM implementation.
 * This ensures single source of truth in index.mjs while maintaining CJS compatibility.
 * @public
 * @async
 * @param {object} [options={}] - Configuration options for the slothlet instance
 * @returns {Promise<function|object>} The bound API object with live-binding context
 *
 * @example // CJS usage
 * const slothlet = require("@cldmv/slothlet");
 * const api = await slothlet({ dir: "./api", context: { user: "alice" } });
 * console.log(api.config.username); // Access configuration
 */
async function slothlet(options = {}) {
	// Dynamic import of ESM entry point
	const { default: esmSlothlet } = await import("./index.mjs");
	return esmSlothlet(options);
}

/**
 * CommonJS default export of the slothlet function.
 * @public
 */
module.exports = slothlet;

/**
 * Named export alias for the slothlet function.
 * Provides the same functionality as the default export.
 * @public
 * @type {Function}
 *
 * @example // CJS named destructuring
 * const { slothlet } = require("@cldmv/slothlet");
 * const api = await slothlet({ dir: "./api" });
 */
module.exports.slothlet = slothlet; // optional named alias
